<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Heladeritrix üç®</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'blog/style.css' %}">
</head>
<body>

    <!-- HEADER -->
    <header>
        <div class="logo">
            <h1>Heladeritrix</h1>
        </div>

        <nav>
            <ul>
                <li><a href="#">Inicio</a></li>
                <li><a href="#">Productos</a></li>
                <li><a href="#contacto">Contacto</a></li>
                <li><a href="{% url 'user:login' %}">Usuario</a></li>
            </ul>
        </nav>
        <div class="cart-icon" onclick="abrirCarrito()">
    üõí <span id="cart-count">0</span>

</div>
    {% if user.is_authenticated %}
    <a href="{% url 'user:logout' %}" class="logout-btn">Cerrar sesi√≥n</a>
{% endif %}

    </header>

    <!-- PRODUCTOS -->
    <section class="productos">

        <!-- FRESA -->
        <div class="card" onclick="abrirDetalle('Fresa')">
            <img src="{% static 'blog/fresa.jpg' %}" alt="Fresa">
            <h3>Helado de Fresa</h3>
            <p>Suave, cremoso y frutal üçì</p>
        </div>

        <!-- CHOCOLATE -->
        <div class="card" onclick="abrirDetalle('Chocolate')">
            <img src="{% static 'blog/choco.jpg' %}" alt="Chocolate">
            <h3>Chocolate</h3>
            <p>Intenso, con 80% cacao para los amantes de lo fuerte</p>
        </div>

        <!-- VAINILLA -->
        <div class="card" onclick="abrirDetalle('Vainilla')">
            <img src="{% static 'blog/vainilla.jpg' %}" alt="Vainilla">
            <h3>Helado de Vainilla</h3>
            <p>Cl√°sico, suave y arom√°tico üç®</p>
        </div>

        <!-- DULCE DE LECHE -->
        <div class="card" onclick="abrirDetalle('Dulce de Leche')">
            <img src="{% static 'blog/dulce_de_leche.jpg' %}" alt="Dulce de Leche">
            <h3>Helado de Dulce de Leche</h3>
            <p>Dulce, cremoso y tradicional ü•õ</p>
        </div>

        <!-- CHOCOLATE DUBAI -->
        <div class="card" onclick="abrirDetalle('Chocolate Dubai')">
            <img src="{% static 'blog/chocolate_dubai.jpg' %}" alt="Chocolate Dubai">
            <h3>Helado Chocolate Dubai</h3>
            <p>Intenso, ex√≥tico y exquisito üç´‚ú®</p>
        </div>

        <!-- FRUTOS ROJOS -->
        <div class="card" onclick="abrirDetalle('Frutos Rojos')">
            <img src="{% static 'blog/frutos_rojos.jpg' %}" alt="Frutos Rojos">
            <h3>Helado Frutos Rojos</h3>
            <p>Fresco, dulce y lleno de sabor üçí</p>
        </div>

    </section>

    <!-- CONTACTO -->
    <section id="contacto" class="contacto">
        <h2>Contacto</h2>
        <p>üìß Email: contacto@heladeritrix.com</p>
        <p>üìû Tel√©fono: +54 11 5555-5555</p>
        <p>üìç Direcci√≥n: Av. Dulce 123, Buenos Aires</p>
    </section>

    <!-- FOOTER -->
    <footer>
        <p>¬© 2025 Heladeritrix ‚Äî Todos los derechos reservados üç®</p>
    </footer>

    <!-- MODAL SIMPLE (YA EXIST√çA) -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-text"></p>
        </div>
    </div>

    <!-- MODAL DETALLE DE PRODUCTO -->
    <div id="detalleProductoModal" class="modal">
        <div class="modal-content detalle-producto">
            <span class="close" onclick="cerrarDetalle()">&times;</span>

            <img id="detalle-img" src="" alt="Imagen del sabor" class="detalle-img">

            <h2 id="detalle-nombre"></h2>

            <p id="detalle-descripcion"></p>

            <p class="detalle-precio">Precio: $<span id="detalle-precio"></span></p>

            <label for="cantidad">Cantidad:</label>
            <input type="number" id="detalle-cantidad" value="1" min="1">

            <button class="btn-primary" onclick="agregarCarrito()">Agregar</button>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        /* HEADER OCULTABLE */
        const header = document.querySelector("header");
        let lastScrollY = 0;
        window.addEventListener("scroll", () => {
            const currentScrollY = window.scrollY;
            if (currentScrollY > lastScrollY && currentScrollY > 80) {
                header.style.transform = "translateY(-100%)";
            } else {
                header.style.transform = "translateY(0)";
            }
            lastScrollY = currentScrollY;
        });

        /* DICCIONARIO COMPLETO */
        const productos = {
            "Chocolate": {
                precio: 1200,
                descripcion: "Helado de chocolate elaborado con cacao puro y crema fresca.",
                imagen: "{% static 'blog/choco.jpg' %}"
            },
            "Fresa": {
                precio: 1100,
                descripcion: "Helado de fresa natural, cremoso y lleno de sabor frutal.",
                imagen: "{% static 'blog/fresa.jpg' %}"
            },
            "Vainilla": {
                precio: 1000,
                descripcion: "Vainilla cl√°sica hecha con vainas naturales. Suave y arom√°tica.",
                imagen: "{% static 'blog/vainilla.jpg' %}"
            },
            "Dulce de Leche": {
                precio: 1300,
                descripcion: "Cremoso helado artesanal de dulce de leche tradicional.",
                imagen: "{% static 'blog/dulce_de_leche.jpg' %}"
            },
            "Chocolate Dubai": {
                precio: 1500,
                descripcion: "Chocolate intenso premium con notas ex√≥ticas y textura sedosa.",
                imagen: "{% static 'blog/chocolate_dubai.jpg' %}"
            },
            "Frutos Rojos": {
                precio: 1150,
                descripcion: "Mezcla cremosa de frutillas, cerezas y frutos del bosque.",
                imagen: "{% static 'blog/frutos_rojos.jpg' %}"
            }
        };

        /* MODAL DETALLE */
        function abrirDetalle(nombre) {
            const prod = productos[nombre];

            document.getElementById("detalle-img").src = prod.imagen;
            document.getElementById("detalle-nombre").innerText = nombre;
            document.getElementById("detalle-descripcion").innerText = prod.descripcion;
            document.getElementById("detalle-precio").innerText = prod.precio;

            document.getElementById("detalleProductoModal").style.display = "flex";
        }

        function cerrarDetalle() {
            document.getElementById("detalleProductoModal").style.display = "none";
        }

        function agregarCarrito() {
            const nombre = document.getElementById("detalle-nombre").innerText;
            const cantidad = document.getElementById("detalle-cantidad").value;

            alert(`Agregado: ${cantidad}x ${nombre}`);
            cerrarDetalle();
        }
    </script>
    <div id="carritoModal" class="modal">
    <div class="modal-content carrito-content">
        <span class="close" onclick="cerrarCarrito()">&times;</span>

        <h2>üõí Tu Carrito</h2>

        <div id="carrito-items"></div>

        <h3>Total: $<span id="carrito-total">0</span></h3>

        <button class="btn-primary" onclick="finalizarCompra()">Comprar</button>
    </div>
</div>
    <script>
let carrito = {};

// FUNCION PRINCIPAL: agregar producto al carrito
function agregarCarrito() {
    const nombre = document.getElementById("detalle-nombre").innerText;
    const cantidad = parseInt(document.getElementById("detalle-cantidad").value);
    const precio = productos[nombre].precio;

    if (carrito[nombre]) {
        carrito[nombre].cantidad += cantidad;
    } else {
        carrito[nombre] = { cantidad: cantidad, precio: precio };
    }

    actualizarCarritoUI();
    cerrarDetalle();
}

// Abre el modal del carrito
function abrirCarrito() {
    document.getElementById("carritoModal").style.display = "flex";
}

// Cierra el modal
function cerrarCarrito() {
    document.getElementById("carritoModal").style.display = "none";
}

// Actualiza lo que se muestra en el carrito
function actualizarCarritoUI() {
    const contenedor = document.getElementById("carrito-items");
    const totalTexto = document.getElementById("carrito-total");
    const cartCount = document.getElementById("cart-count");

    contenedor.innerHTML = "";
    let total = 0;
    let cantidadTotal = 0;

    for (let nombre in carrito) {
        let item = carrito[nombre];
        let subtotal = item.precio * item.cantidad;

        total += subtotal;
        cantidadTotal += item.cantidad;

        contenedor.innerHTML += `
            <div class="carrito-item">
                <strong>${nombre}</strong>  
                <p>${item.cantidad} x $${item.precio}</p>
                <p>Subtotal: $${subtotal}</p>
            </div>
            <hr>
        `;
    }

    totalTexto.innerText = total;
    cartCount.innerText = cantidadTotal;
}

// Bot√≥n comprar
function finalizarCompra() {
    if (Object.keys(carrito).length === 0) {
        alert("El carrito est√° vac√≠o");
        return;
    }

    alert("Compra realizada ‚úîÔ∏è");
    carrito = {};
    actualizarCarritoUI();
    cerrarCarrito();
}
</script>

</body>
</html>
